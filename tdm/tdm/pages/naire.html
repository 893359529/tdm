<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>我的问卷</title>
  <link rel="stylesheet" href="../css/layui.css">
	<script src="../gethost.js" type="text/javascript"></script>
</head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
  <div class="layui-header">
    <div class="layui-logo">我的问卷</div>
    <!-- 头部区域（可配合layui已有的水平导航） -->
    
    <ul class="layui-nav layui-layout-right">
      <li class="layui-nav-item">
        <a href="javascript:;">
          <img src="http://t.cn/RCzsdCq" class="layui-nav-img">
          turbo
        </a>
        <dl class="layui-nav-child">
          <dd><a href="">基本资料</a></dd>
          <dd><a href="">安全设置</a></dd>
        </dl>
      </li>
      <li class="layui-nav-item"><a href="">退出</a></li>
    </ul>
  </div>
  
  <div class="layui-side layui-bg-black">
    <div class="layui-side-scroll">
      <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
      <ul class="layui-nav layui-nav-tree"  lay-filter="test">
        <li class="layui-nav-item layui-nav-itemed">
          <a class="" href="javascript:;">需求管理</a>
          <dl class="layui-nav-child">
            <dd><a href="allnaire.html">所有问卷</a></dd>
            <dd><a href="myWritten.html">我的填写</a></dd>
            <dd><a href="myPush.html">我的发布</a></dd>
            <dd><a href="push.html">新建问卷</a></dd>
          </dl>
        </li>
        
        <li class="layui-nav-item"><a href="">个人中心</a></li>
      </ul>
    </div>
  </div>
  
  <div class="layui-body">
    <!-- 内容主体区域 -->
    <div style="padding: 15px;">


		<div class="content" id="mainContent">
			
			<!-- <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
				<legend style="margin-left:400px;">问卷标题:'+naireVO.title+'</legend>
			</fieldset>
			<blockquote class="layui-elem-quote"><p style="padding-left:50px;">问卷介绍:'+naireVO.introduce+'</p></blockquote>
			<div style='padding:10px 0 10px 100px;'><p style='font-size:20px'>1.单选测试题目</p></div>
			<div class='layui-form-item' style='font-size:14px;padding:10px 0 0 130px;'><table><tr><input type='radio' name='radio1' value='测试单选1' class='test-radio1'></tr><tr>测试单选</tr></table></div>
			<div class='layui-form-item' style='font-size:14px;padding:10px 0 0 130px;'><table><tr><input type='radio' name='radio1' value='测试单选2' class='test-radio2'></tr><tr>测试单选</tr></table></div>
			<div class='layui-form-item' style='font-size:14px;padding:10px 0 0 130px;'><table><tr><input type='radio' name='radio1' value='测试单选3' class='test-radio3'></tr><tr>测试单选</tr></table></div>
			
			<div style='padding:10px 0 10px 100px;'><p style='font-size:20px'>2.单选测试题目</p></div>
			<div class='layui-form-item' style='font-size:14px;padding:10px 0 0 130px;'><table><tr><input type='radio' name='radio2' value='测试单选1' class='test-radio1'></tr><tr>测试单选</tr></table></div>
			<div class='layui-form-item' style='font-size:14px;padding:10px 0 0 130px;'><table><tr><input type='radio' name='radio2' value='测试单选2' class='test-radio2'></tr><tr>测试单选</tr></table></div>
			<div class='layui-form-item' style='font-size:14px;padding:10px 0 0 130px;'><table><tr><input type='radio' name='radio2' value='测试单选3' class='test-radio3'></tr><tr>测试单选</tr></table></div>
			
			
			<div style='padding:10px 0 10px 100px;'><p style='font-size:20px'>3.多选测试题目</p></div>
			<div class='layui-form-item' style='font-size:14px;padding:10px 0 0 130px;'><table><tr><input type='checkbox' name='checkbox1' value='测试多选1' lay-skin='primary' title='阅读'></tr><tr>测试多选</tr></table></div>
			<div class='layui-form-item' style='font-size:14px;padding:10px 0 0 130px;'><table><tr><input type='checkbox' name='checkbox1' value='测试多选2' lay-skin='primary' title='阅读'></tr><tr>测试多选</tr></table></div>
			<div class='layui-form-item' style='font-size:14px;padding:10px 0 0 130px;'><table><tr><input type='checkbox' name='checkbox1' value='测试多选3' lay-skin='primary' title='阅读'></tr><tr>测试多选</tr></table></div>
			
			<div style='padding:10px 0 10px 100px;'><p style='font-size:20px'>4.问答测试题目</p></div>
			<div class='layui-form-item' style='font-size:14px;padding:10px 0 0 130px;'><textarea placeholder='请输入内容' class='layui-textarea' style="width:800px;"></textarea></div>
			
			<button type='button' class='layui-btn layui-btn-radius' id='submitAnswer' style='margin-left:500px;'>提交</button>
		 -->
		<div>
		
		
		</div>
  </div>
  
  <div class="layui-footer">
    <!-- 底部固定区域 -->
    © layui.com - 底部固定区域
  </div>
</div>
<script src="../layui.js"></script>
<script src="../js/jquery-1.11.0.min.js"></script>
<script>
$(document).on('click','#submitAnswer',function(){
	// for(var i = 1; i < 3; i++) {
	// 	alert($('input[name="radio'+i+'"]:checked').val());
	// }
	var checkbox_value =[];//定义一个数组    
	$('input[name="checkbox1"]:checked').each(function(){//遍历每一个名字为nodes的复选框，其中选中的执行函数    
	    checkbox_value.push($(this).val());//将选中的值添加到数组chk_value中    
	});
	var groups = checkbox_value.join(",");
	alert(groups);
});
	
function getParam(paramName) { 
    paramValue = "", isFound = !1; 
    if (this.location.search.indexOf("?") == 0 && this.location.search.indexOf("=") > 1) { 
        arrSource = unescape(this.location.search).substring(1, this.location.search.length).split("&"), i = 0; 
        while (i < arrSource.length && !isFound) arrSource[i].indexOf("=") > 0 && arrSource[i].split("=")[0].toLowerCase() == paramName.toLowerCase() && (paramValue = arrSource[i].split("=")[1], isFound = !0), i++ 
    } 
    return paramValue == "" && (paramValue = null), paramValue 
} 
//JavaScript代码区域

var naire = "";
var questionVOList = [];

	$(document).ready(function(){
		$.ajax({
			type:"GET",
			url:"http://"+g_host+"/naire/content",
			data:{"naireId":getParam("naireId")},
			xhrFields:{withCredentials:true},
			success:function(data){
				if(data.status == "success"){
					naire = data.data;
					questionVOList = data.data.questionVOList;
					reloadDom();
					listen();
				}else{
					alert("获取问卷信息失败，原因为"+data.data.errMsg);
				}
			},
			error:function(data){
				alert("获取问卷信息失败失败，原因为"+data.responseText);
			}
		});
	});
	
	function reloadDom(){
			var naireVO = naire;
			
			//问卷标题及介绍
			var list =
			'<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">'+
				  '<legend style="margin-left:400px;">问卷标题:'+naireVO.title+'</legend>'+
			'</fieldset>'+
			'<blockquote class="layui-elem-quote"><p style="padding-left:50px;">问卷介绍:'+naireVO.introduce+'</p></blockquote>';
			
			$("#mainContent").append($(list));
			
			for(var i = 0; i < questionVOList.length; i++){
				var vo = questionVOList[i];
			
			//问题描述
				var title_list =
				"<div style='padding:10px 0 10px 100px;'><p style='font-size:20px'>"+(i+1)+"."+vo.title+"</p></div>";
				$("#mainContent").append($(title_list));
				
				//选项
				for(var j = 0; j < vo.queOptions.length; j++){
					if(vo.type == "1") {
						var option_list =
						 "<div class='layui-form-item' style='font-size:14px;padding:10px 0 0 130px;'><table><tr><input type='radio' name='radio"+(j+1)+"' value='测试单选1' class='test-radio1'>"+"</tr><tr>"+vo.queOptions[j].content+"</tr></table></div>"
					}else if (vo.type == "2") {
						var option_list =
						 "<div class='layui-form-item' style='font-size:14px;padding:10px 0 0 130px;'><table><tr><input type='checkbox' name='checkbox"+(j+1)+"' value='测试多选1' lay-skin='primary' >"+"</tr><tr>"+vo.queOptions[j].content+"</tr></table></div>"
					}
					$("#mainContent").append($(option_list));
				}
				
				if (vo.queOptions.length == 0 && vo.type == "3") {
					var option_list = "<div class='layui-form-item' style='font-size:14px;padding:10px 0 0 130px;'><textarea placeholder='请输入内容' class='layui-textarea' width:800px;></textarea></div>"
					$("#mainContent").append($(option_list));
				}
					
				
			}
		
	}

layui.use('element', function(){
  var element = layui.element;
  
});
layui.use('form', function(){
	var form = layui.form;
	form.render();
	form.render('radio');
});
</script>
</body>
</html>
        
